{
  "id": "urn:dmb:dp:finance:cashflow_6:0",
  "name": "cashflow_6",
  "version": "0.3.6",
  "fullyQualifiedName": "Liquidity Cash Flows v3 \u2014 6",
  "domain": "finance/liquidity",
  "tags": [
    "finance",
    "gdpr",
    "confidential"
  ],
  "orchestration": {
    "tool": "Dagster",
    "details": {
      "jobs": [
        "load_cashflow",
        "validate_contracts"
      ]
    }
  },
  "qualityControls": {
    "framework": "GreatExpectations",
    "controls": [
      {
        "expectation": "expect_column_values_to_not_be_null",
        "columns": [
          "RowKey"
        ]
      },
      {
        "expectation": "expect_column_values_to_be_between",
        "column": "AmountEUR",
        "min": 0
      },
      {
        "expectation": "expect_column_values_to_be_in_set",
        "column": "Direction",
        "set": [
          "IN",
          "OUT"
        ]
      },
      {
        "expectation": "expect_table_row_count_to_be_between",
        "min": 1
      },
      {
        "expectation": "expect_column_values_to_match_regex",
        "column": "RowKey",
        "regex": "^[A-Za-z0-9\\-]+$"
      }
    ]
  },
  "workloads": [
    {
      "name": "purge_personal_data",
      "type": "lambda",
      "description": "Implements right to be forgotten by purging matching records."
    }
  ],
  "metadata": {
    "owner": {
      "team": "Treasury IT",
      "contact": "treasury-engineering@example.org"
    },
    "costCenter": "FIN-LQD",
    "classification": "restricted",
    "description": "Data product delivering cash movement facts; non-sensitive aggregates only."
  },
  "observability": {
    "metrics": [
      "row_count",
      "null_rate",
      "latency"
    ],
    "logging": {
      "level": "DEBUG",
      "retentionDays": 14
    }
  },
  "lineage": {
    "upstreamSources": [
      {
        "system": "ERP",
        "object": "GL_Bookings"
      },
      {
        "system": "BankAPI",
        "object": "Movements"
      }
    ]
  },
  "dataContracts": [
    {
      "id": "urn:dmb:dp:finance:cashflow_6:0:bigquerytable_output",
      "type": "BigQueryTable",
      "schema": [
        {
          "name": "RowKey",
          "dataType": "STRING",
          "description": "Unique internal identifier for a cash flow row."
        },
        {
          "name": "AmountEUR",
          "dataType": "DECIMAL(18,2)",
          "description": "Monetary movement in EUR; non-negative."
        },
        {
          "name": "Direction",
          "dataType": "STRING",
          "description": "IN for incoming cash, OUT for outgoing cash."
        },
        {
          "name": "BookDate",
          "dataType": "DATE",
          "description": "Ledger posting date."
        }
      ],
      "columnTags": {
        "Direction": {
          "businessTerms": [
            "AccountingPeriod"
          ]
        }
      },
      "sla": {
        "intervalOfChange": "PT8H",
        "timeliness": "PT1H",
        "upTime": 0.984
      }
    },
    {
      "id": "urn:dmb:dp:finance:cashflow_6:0:kafka_output",
      "type": "KafkaTopic",
      "topic": "liquidity.cashflow.variant.6",
      "partitions": 2,
      "retentionDays": 11,
      "schema": [
        {
          "name": "RowKey",
          "dataType": "STRING"
        },
        {
          "name": "AmountEUR",
          "dataType": "DOUBLE"
        },
        {
          "name": "Direction",
          "dataType": "STRING"
        },
        {
          "name": "EventTs",
          "dataType": "TIMESTAMP"
        }
      ],
      "columnTags": {
        "Direction": {
          "businessTerms": [
            "PostingChannel",
            "SettlementMethod",
            "CounterpartyCategory"
          ]
        }
      }
    },
    {
      "id": "urn:dmb:dp:finance:cashflow_6:0:bigquerytable_aux",
      "type": "BigQueryTable",
      "schema": [
        {
          "name": "RowKey",
          "dataType": "STRING",
          "description": "Primary event identifier."
        },
        {
          "name": "AmountEUR",
          "dataType": "NUMERIC",
          "description": "Amount in EUR, zero or positive."
        },
        {
          "name": "Direction",
          "dataType": "STRING",
          "description": "Direction of cash flow."
        },
        {
          "name": "BookDate",
          "dataType": "DATE",
          "description": "Accounting date."
        },
        {
          "name": "EventTs",
          "dataType": "TIMESTAMP",
          "description": "Event timestamp."
        }
      ],
      "sla": {
        "intervalOfChange": "P1D",
        "timeliness": "PT20M",
        "upTime": 0.983
      }
    },
    {
      "id": "urn:dmb:dp:finance:cashflow_6:0:deltatable_aux",
      "type": "DeltaTable",
      "schema": [
        {
          "name": "RowKey",
          "dataType": "STRING",
          "description": "Primary event identifier."
        },
        {
          "name": "AmountEUR",
          "dataType": "NUMERIC",
          "description": "Amount in EUR, zero or positive."
        },
        {
          "name": "Direction",
          "dataType": "STRING",
          "description": "Direction of cash flow."
        },
        {
          "name": "BookDate",
          "dataType": "DATE",
          "description": "Accounting date."
        },
        {
          "name": "EventTs",
          "dataType": "TIMESTAMP",
          "description": "Event timestamp."
        }
      ],
      "sla": {
        "intervalOfChange": "PT6H",
        "timeliness": "PT45M",
        "upTime": 0.986
      }
    }
  ],
  "notes": [
    "Variant 6: topic=liquidity.cashflow.variant.6, partitions=2, retention=11d.",
    "Descriptions in streaming schema are intentionally absent to test contract completeness checks.",
    "No PII is modeled; GDPR tag remains at product level only."
  ]
}